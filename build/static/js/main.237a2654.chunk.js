(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(15),a=n.n(c),r=n(6),o=n(3),u=n(1),i=n(0),d=function(e){var t=e.searchFilter,n=e.handleSearch;return Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:[" Filter shown with",Object(i.jsx)("input",{value:t,onChange:n})]})})},l=function(e){var t=e.name,n=e.handleNames,c=e.number,a=e.handleNumbers,r=e.addName;return Object(i.jsxs)("form",{onSubmit:r,children:[Object(i.jsxs)("div",{children:["Name:",Object(i.jsx)("input",{value:t,onChange:n})]}),Object(i.jsxs)("div",{children:["Number:",Object(i.jsx)("input",{value:c,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Add"})})]})},s=function(e){var t=e.id,n=e.name,c=e.number,a=e.deleteContact;return Object(i.jsx)("table",{children:Object(i.jsx)("tbody",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{style:{width:"130px",paddingBottom:"5px"},children:n}),Object(i.jsx)("td",{style:{width:"130px",paddingBottom:"5px"},children:c}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:function(){return a(t)},children:" delete "})})]})})})},j=function(e){var t=e.persons,n=e.searchFilter,c=e.deleteContact,a=n?t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})):t;return Object(i.jsx)("div",{children:a.map((function(e){return Object(i.jsx)(s,{id:e.id,name:e.name,number:e.number,deleteContact:c},e.id)}))})},b=n(4),m=n.n(b),h="http://localhost:3001/api/persons",f={getAll:function(){return m.a.get(h).then((function(e){return e.data}))},create:function(e){return m.a.post(h,e).then((function(e){return e.data}))},deleteContact:function(e){return m.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},updateNumber:function(e,t){return m.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}},O=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"notification",children:t})},x=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"error",children:t})},p=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(u.useState)(""),s=Object(o.a)(a,2),b=s[0],m=s[1],h=Object(u.useState)(""),p=Object(o.a)(h,2),v=p[0],g=p[1],w=Object(u.useState)(""),N=Object(o.a)(w,2),C=N[0],y=N[1],S=Object(u.useState)(null),k=Object(o.a)(S,2),A=k[0],F=k[1],B=Object(u.useState)(null),D=Object(o.a)(B,2),E=D[0],I=D[1];Object(u.useEffect)((function(){f.getAll().then((function(e){c(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(O,{message:E}),Object(i.jsx)(x,{message:A}),Object(i.jsx)(d,{searchFilter:C,handleSearch:function(e){y(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new contact"}),Object(i.jsx)(l,{name:b,handleNames:function(e){m(e.target.value)},number:v,handleNumbers:function(e){g(e.target.value)},addName:function(e){e.preventDefault();var t={name:b,number:v};if(console.log(t.name),n.some((function(e){return e.name===t.name}))){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var a=n.find((function(e){return e.name===t.name})),o=Object(r.a)(Object(r.a)({},a),{},{number:t.number});f.updateNumber(o.id,o).then((function(e){c(n.map((function(t){return t.id!==a.id?t:e}))),I("Updated contact ".concat(a.name," succesfully!")),m(""),g("")})).catch((function(e){F("Information of ".concat(a.name," has already been removed from server")),c(n.filter((function(e){return e.id!==t.id})))}))}}else f.create(t).then((function(e){I("Added ".concat(t.name)),c(n.concat(e)),m(""),g("")}));setTimeout((function(){F(null),I(null)}),5e3)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(j,{persons:n,searchFilter:C,deleteContact:function(e){var t=n.find((function(t){return t.id===e}));console.log(t.name),window.confirm("Delete ".concat(t.name,"?"))?(f.deleteContact(e).then((function(){c(n.filter((function(t){return t.id!==e})))})),I("".concat(t.name," with number ").concat(t.number," succesfully deleted from the phonebook"))):I("".concat(t.name," not removed - cancelled by the user")),setTimeout((function(){F(null),I(null)}),5e3)}})]})};n(39);a.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.237a2654.chunk.js.map